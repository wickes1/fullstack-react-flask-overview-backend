(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{172:function(e,t,n){"use strict";(function(e){var c=n(66),i=n.n(c),r=n(173);t.a=function(t){var n=t.getStore,c=t.getActions,s=t.setStore;return{store:{token:"",username:"",message:null,data:null,sqlQueryData:null,buildingOverview:null,buildingPageSize:null},actions:{exampleFunction:function(){c().changeColor(0,"green")},syncTokenFromSessionStorage:function(){var e=sessionStorage.getItem("token");console.log("App loaded, syncing session storage token"),e&&""!==e&&void 0!==e&&s({token:e})},logout:function(){sessionStorage.removeItem("token"),s({token:null}),console.log("Logged out")},login:function(){var t=Object(r.a)(i.a.mark((function t(n,c){var r,a,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new Headers).set("Authorization","Basic "+e.from(n+":"+c).toString("base64")),t.prev=2,t.next=5,fetch("/login",{method:"GET",headers:r});case 5:if(200===(a=t.sent).status){t.next=9;break}return alert("Login Error"),t.abrupt("return",!1);case 9:return t.next=11,a.json();case 11:return o=t.sent,sessionStorage.setItem("token",o.token),console.log("User logged in:",o.token),s({token:o.token,username:n}),t.abrupt("return",!0);case 18:t.prev=18,t.t0=t.catch(2),console.error("Login Error");case 21:case"end":return t.stop()}}),t,null,[[2,18]])})));return function(e,n){return t.apply(this,arguments)}}(),getBuildingOverview:function(e){var t=n(),c={method:"POST",headers:{"Content-Type":"application/json","x-access-token":t.token},body:JSON.stringify(e)};fetch("/api/building_overview",c).then((function(e){return e.json()})).then((function(e){s({buildingOverview:e.res,buildingPageSize:e.page_size})})).catch((function(e){return console.log(e)})),console.log(t.buildingOverview)},getSQL:function(){fetch("/api/sql_query",{method:"GET"}).then((function(e){return e.json()})).then((function(e){s({sqlQueryData:e.res})})).catch((function(e){return console.log(e)}))},getMetrics:function(){var e={method:"GET",headers:{"x-access-token":n().token}};fetch("/api/metrics",e).then((function(e){return e.json()})).then((function(e){s({data:e.res})})).catch((function(e){return console.log(e)}))},getMessage:function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).BACKEND_URL+"/api/hello").then((function(e){return e.json()})).then((function(e){return s({message:e.message})})).catch((function(e){return console.log("Error loading message from backend",e)}))}}}}}).call(this,n(206).Buffer)},205:function(e,t,n){},212:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},356:function(e,t,n){},357:function(e,t,n){},358:function(e,t,n){},360:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),r=n(42),s=n.n(r),a=(n(205),n(96)),o=n(20),l=n(374),u=n(363),j=n(376),d=n(364),b=n(133),h=n(21),O=n(172),g=n(2),x=i.a.createContext(null),f=function(e){return function(t){var n=Object(c.useState)(Object(O.a)({getStore:function(){return r.store},getActions:function(){return r.actions},setStore:function(e){return s({store:Object.assign(r.store,e),actions:Object(b.a)({},r.actions)})}})),i=Object(h.a)(n,2),r=i[0],s=i[1];return Object(c.useEffect)((function(){r.actions.syncTokenFromSessionStorage(),r.actions.getSQL(),r.actions.getBuildingOverview({page:1,per_page:15})}),[]),Object(g.jsx)(x.Provider,{value:r,children:Object(g.jsx)(e,Object(b.a)({},t))})}},v=(n(212),function(){var e=Object(c.useContext)(x),t=e.store,n=e.actions,i=Object(o.f)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(l.a,{className:"justify-content-center",bg:"light",variant:"light",onSelect:function(e){return i.push(e)},children:Object(g.jsxs)(u.a,{children:[Object(g.jsx)(l.a.Brand,{href:"/",children:"Home"}),t.token&&""!==t.token&&void 0!==t.token?Object(g.jsxs)(j.a,{variant:"pills",defaultActiveKey:"/",className:"me-auto",children:[Object(g.jsx)(j.a.Item,{children:Object(g.jsx)(j.a.Link,{eventKey:"/overview",children:"Overview"})}),Object(g.jsx)(j.a.Item,{children:Object(g.jsx)(j.a.Link,{eventKey:"/charts",children:"Charts"})})]}):null,Object(g.jsx)(l.a,{className:"justify-content-end",children:Object(g.jsx)("div",{className:"ml-auto",children:t.token?Object(g.jsx)(d.a,{variant:"outline-primary",onClick:function(){i.push("/"),n.logout()},children:"Log out"}):Object(g.jsx)(a.b,{to:"/login",children:Object(g.jsx)(d.a,{variant:"outline-primary",children:"Log in"})})})})]})})})});n(219);function m(){var e=Object(c.useContext)(x);e.store,e.actions;return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"This is the homepage"}),Object(g.jsxs)("h2",{children:["Username: Admin ",Object(g.jsx)("br",{}),"Password: 123456"]})]})}n(220);function p(){var e=Object(c.useContext)(x),t=e.store,n=e.actions,i=Object(c.useState)(""),r=Object(h.a)(i,2),s=r[0],a=r[1],l=Object(c.useState)(""),u=Object(h.a)(l,2),j=u[0],d=u[1],b=Object(o.f)();return t.token&&""!==t.token&&void 0!==t.token&&b.push("/"),Object(g.jsx)("div",{className:"loginPage",children:t.token&&""!==t.token&&void 0!==t.token?b.push("/"):Object(g.jsxs)("div",{className:"form",children:[Object(g.jsx)("h2",{className:"formTitle",children:"Sign In"}),Object(g.jsxs)("div",{className:"formItem",children:[Object(g.jsx)("label",{htmlFor:"name",children:"Username:"}),Object(g.jsx)("input",{type:"text",value:s,onChange:function(e){a(e.target.value)}})]}),Object(g.jsxs)("div",{className:"formItem",children:[Object(g.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(g.jsx)("input",{type:"password",value:j,onChange:function(e){d(e.target.value)}})]}),Object(g.jsx)("button",{className:"submitButton",onClick:function(){n.login(s,j).then((function(){b.push("/")}))},children:"Login"})]})})}n(221);var k=n(365),y=n(366),S=n(370),C=n(192),N=n(193),w=n(80),T=n(77),P=n(196);function B(e){var t=e.title,n=e.data,c=e.xDataKey,i=e.yDataKey,r=e.grid;return Object(g.jsxs)("div",{className:"chart",children:[Object(g.jsx)("h3",{className:"chartTitle",children:t}),Object(g.jsx)(k.a,{width:"100%",aspect:4,children:Object(g.jsxs)(y.a,{data:n,width:730,height:250,children:[r&&Object(g.jsx)(S.a,{stroke:"#e0dfdf",strokeDasharray:"5 5"}),Object(g.jsx)(C.a,{dataKey:c,stroke:"#5550bd"}),Object(g.jsx)(N.a,{}),Object(g.jsx)(w.a,{}),Object(g.jsx)(T.a,{}),Object(g.jsx)(P.a,{dataKey:i,fill:"#8884d8"})]})})]})}n(356);function D(){var e=Object(c.useContext)(x),t=e.store;e.actions;return Object(g.jsx)("div",{className:"charts",children:Object(g.jsx)(B,{title:"Avg. EUI By Property Type",grid:!0,data:t.sqlQueryData,xDataKey:"type",yDataKey:"avg(eui)"})})}var E=n(375),L=n(371),I=n(372),K=n(378),_=n(377);n(357);function A(e){var t=e.building;return Object(g.jsx)("div",{className:"buildingTab",children:Object(g.jsxs)(_.a,{border:"light",children:[Object(g.jsx)(_.a.Body,{children:Object(g.jsx)(_.a.Title,{children:t.PropertyName})}),Object(g.jsx)(_.a.Text,{children:Object(g.jsxs)("ul",{className:"list",children:[Object(g.jsx)("li",{children:t.PrimaryPropertyType}),Object(g.jsx)("li",{children:t.Address}),Object(g.jsx)("li",{children:"# of floor: "+t.NumberofFloors}),Object(g.jsx)("li",{children:"District: "+t.CouncilDistrictCode}),Object(g.jsx)("li",{children:"Built in "+t.YearBuilt}),Object(g.jsx)("li",{children:Object(g.jsx)("img",{src:"https://picsum.photos/600/300/?random&"+Date.now(),alt:"lorem picture"})})]})})]})})}var F=n(194),U=n.n(F);n(358);function q(){var e=Object(c.useContext)(x),t=e.store,n=e.actions,i=Object(c.useState)(0),r=Object(h.a)(i,2),s=r[0],a=r[1];return Object(c.useEffect)((function(){return n.getBuildingOverview({page:s+1,per_page:15}),function(){}}),[s]),t.buildingOverview?Object(g.jsx)("div",{className:"overview",children:Object(g.jsx)(E.a.Container,{defaultActiveKey:0,onSelect:function(e){},children:Object(g.jsxs)(L.a,{children:[Object(g.jsx)(I.a,{className:"leftCard",children:Object(g.jsx)(E.a.Content,{children:t.buildingOverview.map((function(e){return Object(g.jsx)(E.a.Pane,{action:!0,eventKey:e.OSEBuildingID,children:Object(g.jsx)(A,{building:e},e.OSEBuildingID)})}))})}),Object(g.jsx)(I.a,{className:"rightCard",children:Object(g.jsxs)(K.a,{children:[t.buildingOverview.map((function(e){return Object(g.jsx)(K.a.Item,{action:!0,eventKey:e.OSEBuildingID,children:e.PropertyName})})),Object(g.jsx)(U.a,{previousLabel:"Previous",nextLabel:"Next",pageCount:Math.ceil(t.buildingPageSize/15),onPageChange:function(e){var t=e.selected;a(t)},initialPage:0,containerClassName:"paginationButtons",previousLinkClassName:"previousButton link",nextLinkClassName:"nextButton link",disabledClassName:"paginationDisabled",activeClassName:"paginationActive"})]})})]})})}):null}var z=f((function(){return Object(g.jsxs)(a.a,{children:[Object(g.jsx)(v,{}),Object(g.jsxs)(o.c,{children:[Object(g.jsx)(o.a,{exact:!0,path:"/",children:Object(g.jsx)(m,{})}),Object(g.jsx)(o.a,{exact:!0,path:"/login",children:Object(g.jsx)(p,{})}),Object(g.jsx)(o.a,{exact:!0,path:"/overview",children:Object(g.jsx)(q,{})}),Object(g.jsx)(o.a,{exact:!0,path:"/charts",children:Object(g.jsx)(D,{})})]})]})})),H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,379)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),r(e),s(e)}))};n(359);s.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(z,{})}),document.getElementById("root")),H()}},[[360,1,2]]]);
//# sourceMappingURL=main.a9b8b828.chunk.js.map